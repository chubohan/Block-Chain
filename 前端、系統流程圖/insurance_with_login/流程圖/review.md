```mermaid

graph TD

    %% 外部實體
    A["保險公司 (提供帳號與保單資料)"]
    B["用戶 (被保人)"]
    C["業務員 (提供保單資訊, 協助簽訂)"]
    D["符合條件的家屬 (最近順位繼承人)"]
    E["管理員"]

    %% 資料流程
    P1["驗證用戶登入"]
    P2["強制更改密碼 (首次登入)"]
    P3["業務員提供保單資訊, 被保人確認簽訂"]
    P4["保單存儲 (區塊鏈 + 資料庫)"]
    P5["家屬查詢保單 (檢查法定繼承人資格)"]
    P6["整合區塊鏈與資料庫查詢結果"]
    P7["管理區塊鏈與保單參數"]
    P8["業務員查詢與管理保單"]

    %% 資料存儲
    DS1["用戶資料庫"]
    DS2["保單資料庫"]
    DS3["區塊鏈 (智能合約)"]

    %% 流程圖
    A -->|提供帳號與保單資料| C
    C -->|提供保單資訊, 指導簽訂| P3
    B -->|確認簽訂保單| P3
    P3 -->|用戶簽訂保單| P4
    P4 -->|存入資料庫| DS2
    P4 -->|上傳區塊鏈| DS3
    B -->|登入請求| P1
    P1 -->|驗證成功?| P2
    P2 -->|用戶輸入新密碼| DS1
    P1 -->|成功登入| P8
    D -->|家屬查詢請求| P5
    P5 -->|驗證法定繼承人| P6
    P6 -->|查詢區塊鏈與資料庫| DS2
    P6 -->|查詢區塊鏈與資料庫| DS3
    P6 -->|回傳保單結果| D
    E -->|管理保單與區塊鏈| P7
    P7 -->|調整區塊鏈參數| DS3
    C -->|業務員查詢與管理保單| P8






